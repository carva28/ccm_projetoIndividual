<!DOCTYPE html>
<html lang="pt">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
        <title>Projeto Individual CCM</title>


    </head>
    <style>

        .row{
            margin: auto;
            display: block;
            width: 50%;
            border: 1px solid #acacac;
            height: 400px;
        }

        #segunda_div{
            height: 100px;
            background-color: beige;
        }

        #segunda_div input{
            width: 400px;
        }

        #div_btn button{
            margin: 10px;
        }

        #div_btn{
            display: block;
        }


    </style>
    <body>
        <div id="container">
            <div class="alert alert-success" role="alert">
                <h4 class="alert-heading">Bem-vindo(a)!</h4>
                <p>Por favor ative o som.</p>
                <hr>
                <p class="mb-0">Qualquer dúvide contacte-me <a href="mailto:diogocarvalho28@ua.pt"> para o meu email</a>.</p>
            </div>
        </div>
        <div id="container">
            <div class="row justify-content-md-center">
                <div id="div_btn" class="col align-items">
                    <div class=".col-sm-5 .col-md-6">            
                        <button type="button" class="btn btn-danger" id='btnIntro'>Ajuda</button>
                    </div>
                    <div class=".col-sm-5 .col-md-6">            
                        <button type="button" class="btn btn-info" id='btnCriador'>Quem te criou?</button>
                    </div>
                    <div class=".col-sm-5 .col-md-6">            
                        <button type="button" class="btn btn-info" id='btnPierre'>Quem é o Pierre?</button>
                    </div>
                    <div class=".col-sm-5 .col-md-6">            
                        <button type="button" class="btn btn-info" id='btnCriatividade'>O que sabes tu de criatividade?</button>
                    </div>
                    <div class=".col-sm-5 .col-md-6">            
                        <button type="button" class="btn btn-info" id='btnMachineCriatives'>Achas que as maquinas são criativas?</button>
                    </div>
                    <div class=".col-sm-5 .col-md-6">            
                        <button type="button" class="btn btn-info" id='btnPiada'>Conta-me uma piada</button>
                    </div>
                </div>
            </div>
            <div id="segunda_div" class="row align-items-end">

                <div class="col">
                    <p>Escreva <b>ola</b></p>
                    <input id='txtInput'  /> <br><br>  
                </div>
                <div class=".col-sm-5 .offset-sm-2 .col-md-6 .offset-md-0">
                    <button type="button" class="btn btn-warning"  id='btnSpeak'>Enviar!</button>
                </div>

            </div>
        </div>
        <select id='voiceList' style="display:none;"></select> <br><br>





        <script>
            var txtInput = document.querySelector('#txtInput');
            var voiceList = document.querySelector('#voiceList');
            var btnSpeak = document.querySelector('#btnSpeak');
            var btnIntro = document.querySelector('#btnIntro');
            var btnPiada = document.querySelector('#btnPiada');
            var synth = window.speechSynthesis;
            var voices = [];

            PopulateVoices();
            if(speechSynthesis !== undefined){
                speechSynthesis.onvoiceschanged = PopulateVoices;
            }

//             setTimeout(function(){ 
//             
//             document.getElementById('container').innerHTML="";
//             
//             }, 10000);
            
             btnIntro.addEventListener('click', ()=> {
                document.getElementById('txtInput').value = "ola";
                var toSpeak = new SpeechSynthesisUtterance("Bem-vinda professora! O meu nome é Anati e sou a personagem do livro que o Diogo Carvalho criou. Estou aqui para a ajudar. Consegue ver alguns botões que apareceram agora? Pode interargir com eles para saber mais informações.");
                     setTimeout(function(){ 
             
                    document.getElementById('div_btn').style.display="block";
             
             }, 5000);
                    

                    var selectedVoiceName = voiceList.selectedOptions[0].getAttribute('data-name');
                    voices.forEach((voice)=>{
                        if(voice.name === selectedVoiceName){
                            toSpeak.voice = voice;
                        }
                    });
                    synth.speak(toSpeak);
            });

            
            
            btnPiada.addEventListener('click', ()=> {
                document.getElementById('txtInput').value = "piada";
                    
                    let numeroRandom = getRandomIntInclusive(1,3);
                    console.log(numeroRandom)
                    if(numeroRandom == 1){
                        var toSpeak = new SpeechSynthesisUtterance("Qual é o rei dos queijos?         O requeijão!");
                    }else if(numeroRandom == 2){
                        var toSpeak = new SpeechSynthesisUtterance("Qual foi o peixe que caiu do 10º andar?    o AAAAAA    - TUM");
                    }else if(numeroRandom == 3){
                        var toSpeak = new SpeechSynthesisUtterance("O que diz um boneco de neve a outro?  Cheira-te a cenouras?");
                    }

                    var selectedVoiceName = voiceList.selectedOptions[0].getAttribute('data-name');
                    voices.forEach((voice)=>{
                        if(voice.name === selectedVoiceName){
                            toSpeak.voice = voice;
                        }
                    });
                    synth.speak(toSpeak);
            });


            function getRandomIntInclusive(min, max) {
                min = Math.ceil(min);
                max = Math.floor(max);
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            
            btnSpeak.addEventListener('click', ()=> {
                if(txtInput.value == "olá" || txtInput.value == "ola" || txtInput.value == "Ola" || txtInput.value == "Olá" ){
                    var toSpeak = new SpeechSynthesisUtterance("Bem-vinda professora! O meu nome é Anati e sou a personagem do livro que o Diogo Carvalho criou. Estou aqui para a ajudar. Consegue ver alguns botões que apareceram agora? Pode interargir com eles para saber mais informações.");
                     setTimeout(function(){ 
             
                    document.getElementById('div_btn').style.display="block";
             
             }, 5000);
                    

                    var selectedVoiceName = voiceList.selectedOptions[0].getAttribute('data-name');
                    voices.forEach((voice)=>{
                        if(voice.name === selectedVoiceName){
                            toSpeak.voice = voice;
                        }
                    });
                    synth.speak(toSpeak);
                }else if(txtInput.value == "piada" || txtInput.value == "Piada"){
                       setTimeout(function(){ 
             
                    document.getElementById('div_btn').style.display="block";
             
             }, 5000);
                    document.getElementById('txtInput').value = "piada";
                    
                    let numeroRandom = getRandomIntInclusive(1,3);
                    console.log(numeroRandom)
                    if(numeroRandom == 1){
                        var toSpeak = new SpeechSynthesisUtterance("Qual é o rei dos queijos?         O requeijão!");
                    }else if(numeroRandom == 2){
                        var toSpeak = new SpeechSynthesisUtterance("Qual foi o peixe que caiu do 10º andar?    o AAAAAA    - TUM");
                    }else if(numeroRandom == 3){
                        var toSpeak = new SpeechSynthesisUtterance("O que diz um boneco de neve a outro?  Cheira-te a cenouras?");
                    }

                    var selectedVoiceName = voiceList.selectedOptions[0].getAttribute('data-name');
                    voices.forEach((voice)=>{
                        if(voice.name === selectedVoiceName){
                            toSpeak.voice = voice;
                        }
                    });
                    synth.speak(toSpeak);
                }
            });

            function PopulateVoices(){
                voices = synth.getVoices();
                var selectedIndex = voiceList.selectedIndex < 0 ? 0 : voiceList.selectedIndex;
                voiceList.innerHTML = '';
                voices.forEach((voice)=>{
                    var listItem = document.createElement('option');
                    listItem.textContent = voice.name;
                    listItem.setAttribute('data-lang', voice.lang);
                    listItem.setAttribute('data-name', voice.name);
                    voiceList.appendChild(listItem);
                });

                voiceList.selectedIndex = selectedIndex;
            }
        </script>
    </body>
</html>